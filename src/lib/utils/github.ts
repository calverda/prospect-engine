import { Octokit } from "@octokit/rest";

const octokit = new Octokit({ auth: process.env.GITHUB_TOKEN });

export async function createGitHubRepo(name: string): Promise<string> {
  const { data } = await octokit.rest.repos.createForAuthenticatedUser({
    name,
    private: true,
    auto_init: true,
    description: "Preview site â€” auto-generated by Calverda Prospect Engine",
  });
  return data.clone_url!;
}

export async function deleteGitHubRepo(
  owner: string,
  name: string
): Promise<void> {
  await octokit.rest.repos.delete({ owner, repo: name });
}
